
@{
    Layout = "_Layout1";
}

@section Styles {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/css/page1_style.css">
    <link rel="stylesheet" href="~/css/timeline.css">
    <link rel="stylesheet" href="~/css/timer.css"/>
}
@section Scripts{
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
    <script src="~/js/webSpeechAPI.js"></script>
    <script src="~/js/timer.js"></script>
    <script>

        var app = new Vue({
            el: '#app',
            data: {
                currentStep: null,
                steps: [
                    { "label": "Этап 1", "content": "Рецепт 1" },
                    { "label": "Этап 2", "content": "Рецепт 2" },
                    { "label": "Этап 3", "content": "Рецепт 3" },
                    { "label": "Этап 4", "content": "Рецепт 4" }
                ]
            },
            methods: {
                nextStep(next = true) {
                    const steps = this.steps
                    const currentStep = this.currentStep
                    const currentIndex = steps.indexOf(currentStep)

                    // handle back
                    if (!next) {
                        if (currentStep && currentStep.label === 'complete') {
                            return this.currentStep = steps[steps.length - 1]
                        }

                        if (steps[currentIndex - 1]) {
                            return this.currentStep = steps[currentIndex - 1]
                        }

                        return this.currentStep = { "label": "start" }
                    }

                    // handle next
                    if (this.currentStep && this.currentStep.label === 'complete') {
                        return this.currentStep = { "label": "start" }
                    }

                    if (steps[currentIndex + 1]) {
                        return this.currentStep = steps[currentIndex + 1]
                    }

                    this.currentStep = { "label": "complete" }
                },
                stepClasses(index) {
                    let result = `progress__step progress__step--${index + 1} `
                    if (this.currentStep && this.currentStep.label === 'complete' ||
                        index < this.steps.indexOf(this.currentStep)) {
                        return result += 'progress__step--complete'
                    }
                    if (index === this.steps.indexOf(this.currentStep)) {
                        return result += 'progress__step--active'
                    }
                    return result
                }
            },
            computed: {
                progressClasses() {
                    let result = 'progress '
                    if (this.currentStep && this.currentStep.label === 'complete') {
                        return result += 'progress--complete'
                    }
                    return result += `progress--${this.steps.indexOf(this.currentStep) + 1}`
                }
            }
        })

    </script>
}
<section class="meal">
    <div class="container2">
        <div class="meal__inner">
            <div class="meal__items">
                <div class="meal__stars">5.0</div>
                <a class="meal__profile-link" href="#">
                    <img class="meal__profile-img" src="~/images/page1/prifile.png" alt="">
                </a>
            </div>
            <h1 class="meal__title">Классический стейк</h1>
            <div class="meal__descr">10 минут</div>
        </div>
    </div>
</section>
<section class="recipe">
    <div class="container2">
        <div class="recipe__inner">
            <div class="ingredients">
                <h4 class="ingredients__title">Ингредиенты:</h4>
                <div class="ingredients__items">
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                </div>
                <div class="ingredients__btn-items">
                    <button class="ingredients__btn red-btn">В избранное</button>
                    <button class="ingredients__btn red-btn">Начать</button>
                </div>
            </div>
        </div>
    </div>
</section>
@*<section id="blocks">
        <div class="block1">Text1</div>
        <div class="block2">Text2</div>
        <div class="block3">Text3</div>
        <div class="block4">Text4</div>
    </section>*@

<div id="timer"></div>

<div id="app"
     :class="progressClasses">
    <div class="progress__bg"></div>
    <template v-for="(step, index) in steps">
        <div :class="stepClasses(index)">
            <div class="progress__indicator">
                <i class="fa fa-check"></i>
            </div>
            <div class="progress__label">
                {{step.label}}
            </div>
        </div>
    </template>

    <div class="progress__actions">
        <div class="btn"
             v-on:click="nextStep(false)">
            Back
        </div>
        <div class="btn"
             v-on:click="nextStep">
            Next
        </div>
        <div class="recept-content">
            {{currentStep ? currentStep.content : "Начать приготовление блюда"}}
        </div>
    </div>
</div>
