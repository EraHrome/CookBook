
@{
    Layout = "_Layout1";
}

@section Styles {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="~/css/page1_style.css">
    <link rel="stylesheet" href="~/css/timeline.css">
    <link rel="stylesheet" href="~/css/timer.css"/>
}
@section Scripts{
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
    <script src="~/js/webSpeechAPI.js"></script>
    <script src="~/js/timer.js"></script>
    <script>

        var app = new Vue({
            el: '#app',
            data: {
                currentStep: null,
                steps: [
                    { "label": "Этап 1", "content": "Срежьте с куска мяса лишний жир, если он, по-вашему, есть. Разрежьте стейк на 2 равные части, сохраняя толщину. Растолките перец в ступке не очень мелко. Натрите мясо с двух сторон (не там, где разрез) солью, вдавите пальцами перец. Дайте мясу полежать 15–20 мин." },
                    { "label": "Этап 2", "content": "В хорошо разогретой на сильном огне сковороде с толстым дном растопите в оливковом сливочное масло. Уложите стейки на сковороду, жарьте 3 мин. Переверните и жарьте еще 2 мин. Снимите сковороду с огня и дайте постоять 5 мин. Затем верните сковороду на огонь и жарьте еще по 1–3 мин. на каждой стороне, до желаемой степени прожарки. Переложите мясо на подогретые тарелки и накройте куском фольги, не заворачивая края." },
                    { "label": "Этап 3", "content": "Пока мясо отдыхает, сделайте соус. Нарежьте очень мелко шалот, положите его на сковороду, где жарилось мясо. Обжарьте на среднем огне 2 мин. Наклоните сковороду на огне и, держась от нее подальше, влейте коньяк. Он должен загореться (если у вас электрическая плита или коньяк не загорелся от газа, подожгите его прямо в сковороде длинной спичкой). Дайте алкоголю прогореть." },
                    { "label": "Этап 4", "content": "Добавьте теплый бульон, готовьте на сильном огне, помешивая, 1 мин. Добавьте масло, снимите с огня и подайте к стейкам." }
                ]
            },
            methods: {
                nextStep(next = true) {
                    const steps = this.steps
                    const currentStep = this.currentStep
                    const currentIndex = steps.indexOf(currentStep)

                    // handle back
                    if (!next) {
                        if (currentStep && currentStep.label === 'complete') {
                            return this.currentStep = steps[steps.length - 1]
                        }

                        if (steps[currentIndex - 1]) {
                            return this.currentStep = steps[currentIndex - 1]
                        }

                        return this.currentStep = { "label": "start" }
                    }

                    // handle next
                    if (this.currentStep && this.currentStep.label === 'complete') {
                        return this.currentStep = { "label": "start" }
                    }

                    if (steps[currentIndex + 1]) {
                        return this.currentStep = steps[currentIndex + 1]
                    }

                    this.currentStep = { "label": "complete" }
                },
                stepClasses(index) {
                    let result = `progress__step progress__step--${index + 1} `
                    if (this.currentStep && this.currentStep.label === 'complete' ||
                        index < this.steps.indexOf(this.currentStep)) {
                        return result += 'progress__step--complete'
                    }
                    if (index === this.steps.indexOf(this.currentStep)) {
                        return result += 'progress__step--active'
                    }
                    return result
                }
            },
            computed: {
                progressClasses() {
                    let result = 'progress '
                    if (this.currentStep && this.currentStep.label === 'complete') {
                        return result += 'progress--complete'
                    }
                    return result += `progress--${this.steps.indexOf(this.currentStep) + 1}`
                }
            }
        })

    </script>
}
<section class="meal">
    <div class="container2">
        <div class="meal__inner">
            <div class="meal__items__recipe">
                <div class="meal__stars">5.0</div>
                <a class="meal__profile-link" href="#">
                    <img class="meal__profile-img" src="~/images/page1/prifile.png" alt="">
                </a>
            </div>
            <h1 class="meal__title">Классический стейк</h1>
            <div class="meal__descr">10 минут</div>
        </div>
    </div>
</section>

<div id="app"
     :class="progressClasses">
    <div class="progress__bg"></div>
    <template v-for="(step, index) in steps">
        <div :class="stepClasses(index)">
            <div class="progress__indicator">
                <i class="fa fa-check"></i>
            </div>
            @*<div class="progress__label">
                    {{step.label}}
                </div>*@
        </div>
    </template>

    <div class="progress__actions">
        <div class="recept-container">
            {{currentStep ? currentStep.content : "Начать приготовление блюда"}}
        </div>
        <div class="group__btns">
            <button class="btn btn-timeline-controls"
                    v-on:click="nextStep(false)">
                Назад
            </button>
            <button class="btn btn-timeline-controls"
                    v-on:click="nextStep">
                Далее
            </button>
        </div>
        <div class="hint__container">
            <div class="ingredients__item-num">Или скажите</div>
            <div class="int__mark"> «Дальше»</div>
        </div>
    </div>
</div>

<section class="recipe">
    <div class="container2">
        <div class="recipe__inner">
            <div class="ingredients">
                <h4 class="ingredients__title">Ингредиенты:</h4>
                <div class="ingredients__items">
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                    <div class="ingredients__item">
                        <div class="ingredients__item-name">- Стейк свиной</div>
                        <div class="ingredients__item-num">200 гр.</div>
                    </div>
                </div>
                <div class="ingredients__btn-items">
                    <button class="ingredients__btn red-btn">В избранное</button>
                    <button class="ingredients__btn red-btn">Начать</button>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="countdown-bar" id="countdownA">
    <div></div>
    <div></div>
</div>